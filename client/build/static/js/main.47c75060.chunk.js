(this.webpackJsonpguguwagwag=this.webpackJsonpguguwagwag||[]).push([[0],{40:function(e,t,n){},46:function(e,t,n){e.exports=n(89)},51:function(e,t,n){},52:function(e,t,n){e.exports=n.p+"static/media/logo.5d5d9eef.svg"},53:function(e,t,n){},54:function(e,t,n){},83:function(e,t){},89:function(e,t,n){"use strict";n.r(t);var a=n(0),s=n.n(a),o=n(41),i=n.n(o),c=(n(51),n(52),n(53),n(8)),r=n(2),u=n(9),l=n(10),h=n(12),d=n(11),f=(n(54),n(42)),v=n.n(f),p=function(e){Object(h.a)(n,e);var t=Object(d.a)(n);function n(){var e;return Object(u.a)(this,n),(e=t.call(this)).onSendBtnClick=function(){null!=e.state.socket&&e.state.socket.emit("chat",{message:e.state.message,handle:e.state.handle})},e.handleChange=function(t){var n=t.target;e.setState((function(e){return Object(r.a)(Object(r.a)({},e),{},Object(c.a)({},n.id,n.value))}))},e.state={socket:null,handle:"",message:""},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.setState({socket:v.a.connect("https://guguwagwag.herokuapp.com")},(function(){null!=this.state.socket?this.state.socket.on("chat",(function(e){document.getElementById("output").innerHTML+="<p><strong>"+e.handle+": </strong>"+e.message+"</p>"})):alert("Failed to connect server.")}))}},{key:"render",value:function(){return s.a.createElement("div",{id:"mario-chat"},s.a.createElement("div",{id:"chat-window"},s.a.createElement("div",{id:"output"})),s.a.createElement("input",{id:"handle",type:"text",placeholder:"Handle",onChange:this.handleChange}),s.a.createElement("input",{id:"message",type:"text",placeholder:"Message",onChange:this.handleChange}),s.a.createElement("button",{id:"send",onClick:this.onSendBtnClick},"Send"))}}]),n}(s.a.Component),g=n(21),m=n.n(g),k=n(43),E=n(3),b=n(44),w=n(45),y=n.n(w),M=(n(40),function(e){Object(h.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(u.a)(this,n),(a=t.call(this,e)).isPainting=!1,a.userStrokeStyle="#EE92C2",a.guestStrokeStyle="#F0C987",a.line=[],a.userId=Object(b.v4)(),a.prevPos={offsetX:0,offsetY:0},a.onMouseDown=a.onMouseDown.bind(Object(E.a)(a)),a.onMouseMove=a.onMouseMove.bind(Object(E.a)(a)),a.endPaintEvent=a.endPaintEvent.bind(Object(E.a)(a)),a.pusher=new y.a("PUSHER_KEY",{cluster:"eu"}),a}return Object(l.a)(n,[{key:"onMouseDown",value:function(e){var t=e.nativeEvent,n=t.offsetX,a=t.offsetY;this.isPainting=!0,this.prevPos={offsetX:n,offsetY:a}}},{key:"onMouseMove",value:function(e){var t=e.nativeEvent;if(this.isPainting){var n={offsetX:t.offsetX,offsetY:t.offsetY};this.position={start:Object(r.a)({},this.prevPos),stop:Object(r.a)({},n)},this.line=this.line.concat(this.position),this.paint(this.prevPos,n,this.userStrokeStyle)}}},{key:"endPaintEvent",value:function(){this.isPainting&&(this.isPainting=!1,this.sendPaintData())}},{key:"paint",value:function(e,t,n){var a=t.offsetX,s=t.offsetY,o=e.offsetX,i=e.offsetY;this.ctx.beginPath(),this.ctx.strokeStyle=n,this.ctx.moveTo(o,i),this.ctx.lineTo(a,s),this.ctx.stroke(),this.prevPos={offsetX:a,offsetY:s}}},{key:"sendPaintData",value:function(){var e=Object(k.a)(m.a.mark((function e(){var t,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={line:this.line,userId:this.userId},e.next=3,fetch("http://localhost:4000/paint",{method:"post",body:JSON.stringify(t),headers:{"content-type":"application/json"}});case 3:return n=e.sent,e.next=6,n.json();case 6:e.sent,this.line=[];case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){var e=this;this.canvas.width=800,this.canvas.height=500,this.ctx=this.canvas.getContext("2d"),this.ctx.lineJoin="round",this.ctx.lineCap="round",this.ctx.lineWidth=5,this.pusher.subscribe("painting").bind("draw",(function(t){var n=t.userId,a=t.line;n!==e.userId&&a.forEach((function(t){e.paint(t.start,t.stop,e.guestStrokeStyle)}))}))}},{key:"render",value:function(){var e=this;return s.a.createElement("canvas",{ref:function(t){return e.canvas=t},style:{background:"black"},onMouseDown:this.onMouseDown,onMouseLeave:this.endPaintEvent,onMouseUp:this.endPaintEvent,onMouseMove:this.onMouseMove})}}]),n}(a.Component));var j=function(){return s.a.createElement("div",null,s.a.createElement(p,null),s.a.createElement("h3",{style:{textAlign:"center"}},"Paint"),s.a.createElement("div",{className:"main"},s.a.createElement("div",{className:"color-guide"},s.a.createElement("h5",null,"Color Guide"),s.a.createElement("div",{className:"user user"},"User"),s.a.createElement("div",{className:"user guest"},"Guest")),s.a.createElement(M,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(s.a.createElement(s.a.StrictMode,null,s.a.createElement(j,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[46,1,2]]]);
//# sourceMappingURL=main.47c75060.chunk.js.map